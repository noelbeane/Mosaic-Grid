/*! mosaicgrid 05-06-2014 */
function init(a){a&&loadJSON(a),footer()}function loadJSON(a){$(document).ready(function(){var b=a,c={format:"json"};console.log(a),$.getJSON(b,c,function(a){a.mosaicgrid&&$.each(a.mosaicgrid,function(b){var c=a.mosaicgrid[b];tilearr.push(c)}),createTiles();var b=document.querySelector(".mosaic_container");msnry=new Masonry(b,{columnWidth:60,gutter:4,itemSelector:".msnry_item",isFitWidth:!0,isResizeBound:!0,transitionDuration:"0.4s",isAnimated:!Modernizr.csstransitions})})})}function footer(){var a=$("footer").offset().top;$("footer").height();var b=window.innerHeight,c=b-a;b>a?$("footer").css({height:c}):$("footer").css({height:"auto"})}function subnavSlide(){var a=document.getElementById("subnav"),b=document.getElementById("mainContent"),c=document.getElementById("subnavList");document.getElementById("subnavBtn"),0==subnavState?(subnavState=1,a.style.height="12em",a.style.width="25%",b.style.width="66.66666%"):(subnavState=0,a.style.height="3em",a.style.width="8.33333%",b.style.width="83.33333%"),$(c).slideToggle(),$(".mosaic_container").masonry()}function topnavSlide(a){var b=document.getElementById("mainnav"),c=document.getElementById("tools");document.getElementById("sitemenuBtn");var d=document.getElementById("drawer");0==topnavState?(topnavState=1,d.style.height="9em","menu"==a?(b.style.display="block",c.style.display="none"):(c.style.display="block",b.style.display="none")):(topnavState=0,d.style.height="0",c.style.display="none",b.style.display="none")}function checkOrientation(){var a=$(window).width(),b=$(window).height();orientation=b>a?"portrait":"landscape"}function createTiles(){var a=new Array;$.each(tilearr,function(b,c){$.each(c,function(b,c){a.push(c)})});for(var b=0;b<=a.length-1;b++){var c=a[b].title,d=a[b].field_post_cover,e=a[b].path,f=a[b].created,g=a[b].field_post_cover_height,h=a[b].field_post_cover_width,i=a[b].field_post_desc,j=b,k=a[b].field_post_type,l=a[b].name;drawTile(c,i,g,h,j,d,k,l,e,f)}}function drawTile(a,b,c,d,e,f,g,h,i,j){var k=document.createElement("div");document.createElement("div"),document.createElement("div");var l=document.createElement("div"),m=document.createElement("div"),n=document.createElement("div"),o=document.createElement("div"),p=f,q="";switch(g){case"Article":q="icon-file";break;case"Audio":q="icon-microphone";break;case"Document":q="icon-book";break;case"Photo":q="icon-camera";break;case"Video":q="icon-camera-2";break;case"Image":q="icon-image";break;case"Link":q="icon-forward"}$("#mosaic").append(k),k.className="msnry_item",k.id=e+"_container",k.style.height=c+"px",k.style.width=d+"px",$(k).append(n),n.id=e+"_desc",n.className="tile-desc",n.style.height=c+"px",n.style.width=d+"px",$(n).append("<p><span class='tile-title'>"+a+"</span><br><span class='tile-author'>"+h+"</span><br><span class='tile-date'>"+j+"</span><br><br>"+b+"</p>"),$(k).append(l),l.id=e+"_cover",l.className="tile-cover tranz_norm",l.style.height=c+"px",l.style.width=d+"px",l.style.backgroundColor="#fff",l.style.paddingTop=c/2-20+"px",l.style.paddingLeft=d/2-20+"px",$(l).append(o),o.style.className="preloader",o.style.height="40px",o.style.width="40px",o.style.backgroundImage='url("http://mosaicgrid.beane.biz/sites/all/themes/mosaicgrid/images/preloader_40x40.gif")';var r=new Image;r.src=p,$(r).load(function(){l.style.backgroundImage='url(" '+p+' ")',$(o).hide()}),$(k).append(m),m.id=e+"_label",m.className="tile-label",$(m).append("<div class='tile_icon_wrapper'><div class='"+q+" tile_icon' ></div></div><div class='tile_icon_point'></div><div class='tile_label_txt'>"+a+"</div>"),$(k).data("tileState",0),$(k).mouseover(function(){var a=e+"_cover";tileOpen(a)}),$(k).mouseout(function(){var a=e+"_cover",b=e+"_desc";tileClose(a,b)}),$(k).click(function(){window.open(i)})}function tileOpen(a){$(document.getElementById(a)).parent().height(),$(document.getElementById(a)).data("tileState",1),$(document.getElementById(a)).css("opacity","0")}function tileClose(a,b){$(document.getElementById(b)).parent().height(),$(document.getElementById(a)).data("tileState",0),$(document.getElementById(a)).css("opacity","1")}var subnavState=0,topnavState=0,orientation="portrait",tileState=0,iconFolder="images/glyphs/",tilearr=new Array,msnry=new Object;$(window).resize(function(){checkOrientation(),footer()});